[tool.ruff]
line-length = 100


[tool.ruff.lint]
select = ["E", "F", "I"]
# Allow prints and placeholder-less f-strings
ignore = ["T201", "F541"]

[tool.ruff.lint.isort]
known-third-party = ["plotly", "pandas", "numpy", "yfinance"]

[tool.ruff.lint.per-file-ignores]
"test_*.py" = ["E402", "F401", "E501", "I001"]
"backtest.py" = ["I001"]
"cache_utils.py" = ["I001"]
"stockdata_retriever.py" = ["I001"]
"analyze_*.py" = ["E501", "F401"]
"compare_backtests.py" = ["E501"]

[tool.coverage.run]
omit = [
    "test_*.py",
    "analyze_*.py",
    "compare_backtests.py",
    "grading/grading_basic.py",
    "visualize_*.py",
    "first_trade_analysis.py",
    "conftest.py",
    "break_and_retest_strategy.py",
    "break_and_retest_detection.py",
    "break_and_retest_live_scanner.py",
    "stockdata_retriever.py",
    "backtest.py",
    "hourly_distribution.py",
    # Omit standalone analysis / export / maintenance scripts not part of core runtime
    "compute_funnel_metrics.py",
    "diagnose_filtering.py",
    "export_breakout_score_distribution.py",
    "export_drop_reason_analysis.py",
    "repair_cache_5m_from_1m.py",
]

[tool.coverage.report]
exclude_lines = [
    "pragma: no cover",
    "def __repr__",
    "raise AssertionError",
    "raise NotImplementedError",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
    "if typing.TYPE_CHECKING:",
]
